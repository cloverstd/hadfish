{% extends "layout.html" %}
{% block title %}正在销售的商品{% endblock %}


{% block sider %}
{{ super() }}
{% endblock %}

{% block content %}
<div>
	<div class="row  text-center">
		<div class="span10">
			<div class="sale-show-items-box">
				<div class="row">
				
					{% for item in items.sales %}
					<div class="span2">
						<div class="sale-show-item-box">
							<a title="{{ item.item.name }}" href="{{ url_for('item_sale.show_item_by_id', item_id=item.item.id) }}">
								{% if item.item.images[0] %}
								<img class="img-rounded" src="http://hadfish.qiniudn.com/{{ item.item.images[0] }}_200.200" />
								{% else %}
								<img class="img-rounded" src="/static/img/txdefault-small.jpg" width=200 height=200/>
								{% endif %}
							</a>

							<div class="sale-show-item-title text-left">
								<a title="{{ item.item.name }}" href="{{ url_for('item_sale.show_item_by_id', item_id=item.item.id) }}">
									{{ item.item.name[:8] }}
								</a>
							</div>
							<div class="sale-show-item-price text-left">
								{{ item.item.price }}
							</div>
							
							<div class="sale-show-item-original_price text-right" >
								<small><del>{{ item.item.original_price }}</del></small>
							</div>
						</div>	
					</div>
					{% endfor %}
				</div>	    
			</div>
		</div>

		<div class="span10">
			<div class="pagination pagination-small">
  <ul>
      {% if items.has_prev %}
    <li><a href="{{ url_for('item_sale.show_item', page=items.prev_num) }}" >上一页</a></li>
    {% else %}
    <li class="disabled"><span>上一页</span></li>
    {% endif %}


    {% if 6*((items.page/6)|int) > 0 %}
    {% if items.pages > 7 %}
    <li><a href="{{ url_for('item_sale.show_item', page=1) }}">1</a></li>
    <li class="disabled"><span>...</span></li>
    {% if 6*((items.page/6)|int) > 0 %}
    <li><a href="{{ url_for('item_sale.show_item', page=6*((items.page/6)|int) - 1) }}">{{ 6*((items.page/6)|int) - 1 }}</a></li>
    {% endif %}
    {% endif %}
    {% else %}
    {% endif %}

    {% if 6*((items.page/6)|int) + 7 < items.pages %}

        {% for i in range(6*((items.page/6)|int), 6*((items.page/6)|int) + 7) %}
            {% if items.page == i %}
                <li class="disabled"><span>{{ i }}</span></li>
            {% elif i == 0 %}
                {# 避免出现 0 #}
            {% else %}
                <li><a href="{{ url_for('item_sale.show_item', page=i) }}">{{ i }}</a></li>
            {% endif %}
        {% endfor %}

        <li class="disabled"><span>...</span></li>
        <li><a href="{{ url_for('item_sale.show_item', page=items.pages) }}">{{ items.pages }}</a></li>
    {% elif items.pages < 7 %}
        {% for i in range(1, items.pages + 1) %}
            {% if items.page == i %}
                <li class="disabled"><span>{{ i }}</span></li>
            {% else %}
                <li><a href="{{ url_for('item_sale.show_item', page=i) }}">{{ i }}</a></li>
            {% endif %}
        {% endfor %}

    {% else %}
        {% for i in range(items.pages-6, items.pages + 1) %}
            {% if items.page == i %}
                <li class="disabled"><span>{{ i }}</span></li>
            {% else %}
                <li><a href="{{ url_for('item_sale.show_item', page=i) }}">{{ i }}</a></li>
            {% endif %}
        {% endfor %}

    {% endif %}

    {#% if 6*((items.page/6)|int) + 7 < items.pages %}
    <li class="disabled"><span>...</span></li>
    <li><a href="{{ url_for('item_sale.show_item', page=items.pages) }}">{{ items.pages }}</a></li>
    {% endif %#}

    {% if items.has_next %}
    <li><a href="{{ url_for('item_sale.show_item', page=items.next_num) }}" >下一页</a></li>
    {% else %}
    <li class="disabled"><span>下一页</span></li>
    {% endif %}
    
  </ul>
</div>
		</div>

	</div>
</div>
{% endblock %}

{% block solescript %}
{% endblock %}
